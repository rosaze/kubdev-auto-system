# Python ë¨¸ì‹ ëŸ¬ë‹ í™˜ê²½ ë°ëª¨ í…œí”Œë¦¿
# ë¼ì´ë¸ŒëŸ¬ë¦¬ ìë™ ì„¤ì¹˜ í…ŒìŠ¤íŠ¸ìš©
apiVersion: kubedev.my-project.com/v1alpha1
kind: KubeDevEnvironment
metadata:
  name: demo-python-ml
  namespace: kubdev-users
spec:
  userName: "demo-student"

  # Git ë ˆí¬ì§€í† ë¦¬ (ë¨¸ì‹ ëŸ¬ë‹ íŠœí† ë¦¬ì–¼)
  gitRepository: "https://github.com/APPS-sookmyung/2025-1-AI-Study.git"
  gitRef: "main"

  # Docker ì´ë¯¸ì§€
  image: "codercom/code-server:latest"

  # â­ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìë™ ì„¤ì¹˜ ëª…ë ¹
  commands:
    init: |
      echo "========================================="
      echo "ğŸ“¦ Python ë¨¸ì‹ ëŸ¬ë‹ í™˜ê²½ ì„¤ì • ì‹œì‘..."
      echo "========================================="

      cd /workspace

      # Python ë²„ì „ í™•ì¸
      python --version

      # pip ì—…ê·¸ë ˆì´ë“œ
      echo "â¬†ï¸ pip ì—…ê·¸ë ˆì´ë“œ ì¤‘..."
      pip install --upgrade pip -q

      # ë°ì´í„° ê³¼í•™ í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
      echo "ğŸ“š ë°ì´í„° ê³¼í•™ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì¤‘..."
      pip install -q numpy pandas matplotlib seaborn scikit-learn

      # ì„¤ì¹˜ í™•ì¸
      echo ""
      echo "âœ… ì„¤ì¹˜ ì™„ë£Œ! ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „:"
      echo "-----------------------------------"
      python -c "import numpy; print(f'  â€¢ NumPy: {numpy.__version__}')"
      python -c "import pandas; print(f'  â€¢ Pandas: {pandas.__version__}')"
      python -c "import matplotlib; print(f'  â€¢ Matplotlib: {matplotlib.__version__}')"
      python -c "import sklearn; print(f'  â€¢ Scikit-learn: {sklearn.__version__}')"
      echo "-----------------------------------"
      echo ""
      echo "ğŸ‰ í™˜ê²½ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
      echo "========================================="

    # start ëª…ë ¹ì€ ì„ íƒì‚¬í•­ (ë°ì´í„° ë¶„ì„ì€ ë³´í†µ ìˆ˜ë™ ì‹¤í–‰)
    start: ""

  # í¬íŠ¸ ì„¤ì •
  ports:
    - 8080  # code-server
    - 8888  # Jupyter Notebook (í•„ìš”ì‹œ)

  # ìŠ¤í† ë¦¬ì§€
  storage:
    size: "20Gi"
